---
const { name, classname } = Astro.props;
---
<hide-class-button>
    <button class="bg-green-600 hover:bg-slate-900 text-white font-bold py-2 px-4 rounded-xl m-4"
      data-classname={classname}
      type="button">{name}</button>
</hide-class-button>
<script>
    class HideClassButton extends HTMLElement {
        constructor() {
            super();

            const button = this.querySelector('button');
            if (button) {
                const classname = button.dataset.classname;
                console.log('toggled class: ' + classname)

                button.addEventListener('click', () => {
                    const toggleCategory = (classname) => {
                        // Select all elements with the category class
                        const elements = document.querySelectorAll('.' + classname);
                        // For each element, toggle the 'hidden' class
                        elements.forEach(element => {
                            element.classList.toggle('hidden');
                        });
                    }
                    toggleCategory(classname);

                    // Add an extra class to the button
                    button.classList.toggle('toggled');
                });
            }
        };
    }
    customElements.define('hide-class-button', HideClassButton);
</script>
<style>
    .toggled {
        background-color: #100418;
    }
</style>