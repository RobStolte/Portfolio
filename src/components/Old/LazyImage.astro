---
import { Image } from "astro:assets";
import { StoryblokAssetManager } from "@/scripts/storyBlokUtil";

const sta = new StoryblokAssetManager();

const {
    imgURL,
    imageWidth,
    imageHeight,
    imageAlt,
    title,
    classnames,
    noImageProcessing,

} = Astro.props;
const staticImageWidth = 300
const imageData = sta.getRezAndAspectFromStoryAssetFilename(imgURL)
const newHeight = imageData.aspectRatio * staticImageWidth;

const image = noImageProcessing ? `${imgURL}` : `${imgURL}/m/0x${imageWidth}/filters:quality(80):format(webp)`;
---
<Image
    src={image}
    width={imageWidth || 500}
    height={imageHeight || 300}
    alt={imageAlt || title}
    class={classnames}/>