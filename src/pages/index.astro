---
import BaseLayout from '@layouts/BaseLayout.astro';
import getAge from '../scripts/getAge';
import HorizontalCard from '@components/HorizontalCard.astro';
import { getCollection } from 'astro:content';
import persoon from "src/data/persoon.json";

const projects = (await getCollection('projects')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

const last_projects = projects.slice(0, 3);
const last_posts = posts.slice(0, 3);
const geboorteDatum = new Date(persoon.Geboortejaar, persoon.GeboorteMaand, persoon.GeboorteDag);
---

<BaseLayout sideBarActiveItemID='home'>
  <div class='pb-12 mt-5'>
    <hgroup>
      <p class='text-xl py-1'>Moii ðŸ‘‹ Ik ben</p>
      <h1 class='text-5xl font-bold'>{persoon.Voornaam} {persoon.Achternaam}</h1>
      <p class='text-3xl py-3'>Tech enthousiast</p>
      <div class='py-2'></div>
    </hgroup>

    <text class='text-lg'>
      Van harte welkom op mijn kleine stukje internet. Hier deel ik zo nu en
      dan wat van mijn passies. Ik ben een {getAge(geboorteDatum)}-jarige
      techneut die zich graag bezighoudt met allerlei soorten techniek, zowel
      fysiek als digitaal. Mijn focus ligt vooral op lasertechnologie,
      CNC-machines en ICT-infrastructuur.
    </text>

    <div class='mt-8'>
      <hr/>
      <a class='btn' href=`mailto:${persoon.Email}` target='_blank'
        ><i class='fas fa-envelope-open'></i> contact!</a
      >
    </div>
  </div>
  <section>
    <h2 class='text-3xl w-full font-bold mb-2'>Mijn laatste projecten</h2>
    {
      last_projects.map((post) => (
        <>
          <HorizontalCard
            title={post.data.title}
            img={post.data.heroImage}
            desc={post.data.description}
            url={'/projects/' + post.slug}
            target='_self'
            badge={post.data.badge}
          />
          <hr />
        </>
      ))
    }
    <hr />
  </section>

  <section>
    <h2 class='text-3xl w-full font-bold mb-5 mt-10'>Laatste van het blog</h2>
    {
      last_posts.map((post) => (
        <>
          <HorizontalCard
            title={post.data.title}
            img={post.data.heroImage}
            desc={post.data.description}
            url={'/blog/' + post.slug}
            target='_self'
            badge={post.data.badge}
          />
          <hr />
        </>
      ))
    }
    <hr />
  </section>
</BaseLayout>
